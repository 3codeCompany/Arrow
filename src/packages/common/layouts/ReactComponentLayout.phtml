<?
$class = str_replace(["\\", "/",], "_", $this->getPath());
$class = trim($class, "_");

if ($this->getPackage() == "app") {
    $class = "app_" . $class;
}
$props = json_encode(
    array_merge([
        "baseURL" => rtrim(\Arrow\Router::link("."), "/"),
        "path" => $this->getPath(),
        "requestURI" => $_SERVER["REQUEST_URI"],
        "component" => $class
    ], $this->getVars())
);

if(isset($_REQUEST["__PROPS_REQUEST__"])){
    header('Content-Type: application/json');
    echo $props;
    exit();
}

?>

<script type="text/javascript">window.CONTROLS_BASE_LOCATION = '<?=addslashes($this->getPath())?>';</script>
<script type="text/javascript">window.reactVariable =  <?= $props ?></script>
<div react-component="PanelComponentLoader" react-props="reactVariable"></div>
