<?php
$this->data["user"]->getSetting('sidebar-collapse', 1);
$class = " testowa strona";
$menu = \Arrow\Common\Models\Panel\AdministrationExtensionsManager::getData();
$request = \Symfony\Component\HttpFoundation\Request::createFromGlobals();

?>
<!doctype html>
<!--[if gt IE 8]><!-->
<html class="no-js"> <!--<![endif]-->
<head>


    <meta charset="utf-8">
    <base href="<? print \Arrow\RequestContext::getProtocol() . $_SERVER["HTTP_HOST"] . $request->getBasePath()?>"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title><?= $this->data["applicationTitle"] ?></title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

    <link rel="shortcut icon" href="data:image/x-icon;," type="image/x-icon">

</head>
<body id="app" class="back-office-body">



<script type="text/javascript">
    window.reactBackOfficeVar =  <?= json_encode([
        "appIcon" => $this->data["applicationIcon"],
        "appTitle" => $this->data["applicationTitle"],
        "appMenu" => $menu,
        "appBaseURL" => $request->getBasePath(),
        "user" => ["login" => $this->data["user"]["login"]],
        "baseURL" =>  "/",
        "path" => $request->getPathInfo(),
        "requestURI" => $_SERVER["REQUEST_URI"],
        "component" => $class,
        "packages" => \Arrow\Models\Project::getInstance()->getPackages()
    ]) ?>
</script>
<div react-component="BackOfficePanel" id="root" react-props="reactBackOfficeVar"></div>
<div id="modal-root"></div>
<? if (!isset($_SESSION["inDev"])) {
    $_SESSION["inDev"] = false;
} ?>
<? if (isset($_REQUEST["inDev"])) {
    $_SESSION["inDev"] = $_REQUEST["inDev"];
} ?>

<!--<script type="text/javascript" src="<?/*= $this->data["webpackManifest"]["vendors"]["js"] */?>"></script>
<link rel="stylesheet" href="<?/*= $this->data["webpackManifest"]["vendors"]["css"] */?>"/>-->

<? if ($this->data["webpackManifest"] && !$_SESSION["inDev"]) { ?>
    <script type="text/javascript" src="<?= $this->data["webpackManifest"]["admin"]["js"] ?>"></script>
    <link rel="stylesheet" href="<?= $this->data["webpackManifest"]["admin"]["css"] ?>"/>
<? } else { ?>
    <script src="//localhost:3000/bundle.js" crossorigin></script>
<? } ?>



</body>
</html>
