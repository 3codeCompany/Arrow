<?
$baseURL = explode("/", $this->path);
array_pop($baseURL);
$baseURL = implode("/", $baseURL);


$class = str_replace(["\\", "/",], "_", $this->getPath());
$class = trim($class, "_");


$class = "app_" . $class;

$props = json_encode(
    array_merge([
        "baseURL" => $baseURL,
        "path" => $this->getPath(),
        "requestURI" => $_SERVER["REQUEST_URI"],
        "component" => $class
    ], $this->getVars())
);

if (isset($_REQUEST["__PROPS_REQUEST__"])) {
    header('Content-Type: application/json');
    echo $props;
    exit();
}

?>

<script>
    window.reactBackOfficeVar =  <?=json_encode([
        "appIcon" => "Mail",
        "appTitle" => \Arrow\ConfigProvider::get("panel")["title"],
        "appMenu" => \Arrow\Common\Models\Panel\AdministrationExtensionsManager::getData(),
        "appBaseURL" => \Arrow\RequestContext::getBaseUrl(),
        "user" => ["login" => $this["user"]["login"]],

        "baseURL" => $baseURL,
        "path" => $this->package.$this->path,
        "requestURI" => $_SERVER["REQUEST_URI"],
        "component" => $class

    ]) ?>;
    window.CONTROLS_BASE_LOCATION = '<?=addslashes($this->getPath())?>';
    window.reactVariable =  <?= $props ?>
</script>

<div id="root"></div>

<div id="modal-root"></div>

<script type="text/javascript" src="<?= $this["webpackManifest"]["vendors"]["js"] ?>"></script>
<link rel="stylesheet" href="<?= $this["webpackManifest"]["vendors"]["css"] ?>"/>



<<<<<<< HEAD
<? if (  ($this["webpackManifest"] && !$_SESSION["inDev"])) { ?>
=======
<? if ($this["webpackManifest"] && !$_SESSION["inDev"]) { ?>
>>>>>>> 48b53524a967b453047c1ed0b071d6c459a0526b
    <script type="text/javascript" src="<?= $this["webpackManifest"]["admin"]["js"] ?>"></script>
    <link rel="stylesheet" href="<?= $this["webpackManifest"]["admin"]["css"] ?>"/>
<? } else { ?>
    <script src="//localhost:3000/bundle.js" crossorigin></script>
<? } ?>

