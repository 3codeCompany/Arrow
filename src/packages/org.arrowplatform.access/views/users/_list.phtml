<ul class="breadcrumb">
    <li><a href="./admin"><i class="icon-home"></i>Start</a> <span class="divider">/</span></li>
    <li class="active">Uprawnienia<span class="divider">/</span> </li>
    <li class="active">Lista użytkowników</li>
</ul>

<ui:ajax ctrlId="users-list-ajax">
    <ui:table title="Użytkownicy" ctrlId="users-list">
        <ui:tablesearch fields="id;login" />
        <data:source>
            <data:model model="\Arrow\Access\User"/>
        </data:source>
        <table:column name="Id" field="id"/>
        <table:column name="Login" field="login" width="400" class="ctrl-cell-live-menu"/>
        <table:column name="Grupy Dostępu" field="id" type="template">
            <common:template>
                <?=implode(",", $context->getAccessGroups());?>
            </common:template>
        </table:column>
        <table:column name="Stan" field="active;bad_log" type="template">
            <common:template>
                <?if (!$context['active']) { ?>
                <img src="r:common::/graphic/administration/icons/nook.png" class="conf-blocade"/>
                <span class="nfo">nie aktywny<br/></span>
                <? } else { ?>
                <img src="r:common::/graphic/administration/icons/ok.png" class="conf-blocade"/>
                <spanclass="nfo">aktywny</span>
                <? }?>
            </common:template>
        </table:column>
        <table:column name="Dodał" field="id" type="template" sortable="0">
            <common:template>
                <? /*

			{assign var=track value=$context->getObject() }
			{assign var=track value=$track->getTrack() }
			{if isset($track.date) }
				{if strlen( $track.name ) > 0 }
					<b>{$track.name}</b> <br />
				{else} <b>{$track.login}</b> <br /> {/if}	
				{$track.date}
			{else}
			---
			{/if}
                */ ?>
            </common:template>
        </table:column>
        <ui:actionsGroup name="top">
            <ui:action id="create" type="dialog" template="access::/users/edit" name="Dodaj">
            </ui:action>
        </ui:actionsGroup>

        <ui:actionsGroup name="row">
            <ui:action id="history" name="Historia" type="dialog" width="500" height="350" template="common::/history">
                <ui:param name="model" value="Arrow\Access\User"/>
                <ui:param name="object_id" value="#id#"/>
            </ui:action>
            <ui:action id="save" name="edytuj" type="dialog" template="access::/users/edit">
                <ui:param name="id" value="#id#"/>
            </ui:action>
            <ui:action id="delete" name="usuń" type="execute" confirm="1"></ui:action>
        </ui:actionsGroup>
    </ui:table>
</ui:ajax>
