<?=$this["generator"]->generate()?>

<div id="subMenu">
    <ul class="breadcrumb">
        <li><a href="./admin"><i class="icon-home"></i>Start</a> <span class="divider">/</span></li>
        <li class="active">Uprawnienia<span class="divider">/</span></li>
        <li><a href="v:./list" target="_parent">Lista użytkowników</a> <span class="divider">/</span></li>

        <li class="active">Dodanie nowego użytkownika</li>
    </ul>
    <?=$this->getLayout()->printStandartMenu("Dodanie użytkownika", "Edycja użytkownika", $this["edit_user"], "login")?>
</div>


    <form:form action="o:common::/data/operation" ctrlId="data"
               validator="\Arrow\Access\UserFormValidator">
        <form:hidden namespace="0" name="model" value="Arrow\Access\User"/>
        <form:hidden namespace="0" name="key" value="$request['key']"/>
        <form:hidden namespace="0" name="action" value="save"/>
        <data:source key="$request['key']">
            <data:model model="Arrow\Access\User"/>
        </data:source>
        <div class="group">
            <h4><i class="icon-edit"></i>Dane użytkownika</h4>
            <table class="list-table">
                <tr>
                    <td class="label">Login</td>
                    <td>
                        <form:text name="login" size="30" alert="Podaj nazwę" length="1," icon="user" />
                    </td>
                </tr>
                <tr>
                    <td class="label">Email</td>
                    <td>
                        <form:text name="email" check="0" size="30" alert="Podaj nazwę" length="1," icon="user" />
                    </td>
                </tr>


                <tr>
                    <td class="label">Aktywny</td>
                    <td>
                        <form:switch name="active" default="0">
                            <form:option label="Nie" value="0"/>
                            <form:option label="Tak" value="1"/>
                        </form:switch>
                    </td>
                </tr>
                <tr>
                    <td class="label">Potrzebna zmiana hasła</td>
                    <td>
                        <form:switch name="need_change_password" default="0">
                            <form:option label="Nie" value="0"/>
                            <form:option label="Tak" value="1"/>
                        </form:switch>
                    </td>
                </tr>
            </table>


        </div>

        <div class="group">
            <h4><i class="icon-group"></i>Grupy dostępu</h4>

            <table>
                <tr>
                    <td class="label">Wybierz grupę</td>
                    <td>
                        <input type="hidden" name="parameters[accessGroups][]" value=""/>
                        <select multiple="multiple" name="parameters[accessGroups][]">
                            <?foreach($this['groups'] as $id => $p){?>
                                <option value="<?=$id?>" <?=in_array($id, $this['user_groups'])?'selected="selected"':''?> ><?=$p;?></option>
                            <?}?>
                        </select>
                    </td>
                </tr>
            </table>
        </div>
        <div class="clearfix"></div>
        <div class="group pull-left">
            <h4><i class="icon-key"></i>Zmiana hasła</h4>

            <table>
                <tr>
                    <td class="label">
                        Hasło
                        <?if ($request["id"]) { ?>
                            <div style="font-size: 10px;">Podaj tylko w przypadku zmiany</div><? }?>
                    </td>
                    <td>
                        <form:password name="password" size="30" check="0" value="" id="pass11"/>
                    </td>
                </tr>
                <tr>
                    <td class="label">Powtórz hasło</td>
                    <td>
                        <form:password name="repassword" size="30" check="0" value="" id="pass12" namespace="0"/>
                    </td>
                </tr>
            </table>
        </div>
    </form:form>