<!doctype html>
<html style="height: 100%;">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Web Application</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">


    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
    <!-- Needs images, font... therefore can not be part of main.css -->
    <link rel="shortcut icon" href="data:image/x-icon;," type="image/x-icon">
    <link rel="stylesheet" href="assets/font-awesome/css/font-awesome.min.css">

    <!-- end Needs images -->

    <link rel="stylesheet" href="assets/engine/src/packages/common/resources/panel/css/panel.css">

</head>
<body>

<?php

$props = json_encode(
    array_merge([
        "baseURL" => rtrim(\Arrow\Router::link("."), "/"),
        "path" => $this->getPath(),
        "requestURI" => $_SERVER["REQUEST_URI"],
        "component" => 'access_auth_loginComponent'
    ], $this->getVars())
);
?>

<script type="text/javascript">window.CONTROLS_BASE_LOCATION = '/access/auth/login';</script>
<script type="text/javascript">window.reactVariable =  <?= $props ?></script>
<div react-component="PanelComponentLoader" react-props="reactVariable"></div>


<?
$form = $this["form"];


?>



<? if (!isset($_SESSION["inDev"])) {
    $_SESSION["inDev"] = false;
} ?>
<? if (isset($_REQUEST["inDev"])) {
    $_SESSION["inDev"] = $_REQUEST["inDev"];
} ?>

<?php
$manifest = false;
$manifestFile = ARROW_DOCUMENTS_ROOT . "/assets/dist/webpack-assets.json";
if (file_exists($manifestFile)) {
    $manifest = json_decode(file_get_contents($manifestFile), true)["admin"];
}


?>

<? if ($manifest && !$_SESSION["inDev"]) { ?>
    <script type="text/javascript" src="<?= $manifest["js"] ?>"></script>
<link rel="stylesheet" href="<?= $manifest["css"] ?>"/>
<? } else { ?>
    <script type="text/javascript" src="//localhost:3000/bundle.js" charset="utf-8"></script>
<? } ?>


</body>
</html>
