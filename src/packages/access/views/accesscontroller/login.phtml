<!doctype html>
<html style="height: 100%;">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Web Application</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">


    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
    <!-- Needs images, font... therefore can not be part of main.css -->
    <link rel="shortcut icon" href="data:image/x-icon;," type="image/x-icon">
    <link rel="stylesheet" href="assets/font-awesome/css/font-awesome.min.css">

    <!-- end Needs images -->

    <link rel="stylesheet" href="assets/engine/src/packages/common/resources/panel/css/panel.css">

</head>
<body>

<?php
$request = \Symfony\Component\HttpFoundation\Request::createFromGlobals();
$props = json_encode(
    array_merge([
        "baseURL" => $request->getBasePath(),
        "path" => $request->getPathInfo(),
        "requestURI" => $request->getRequestUri(),
        "component" => 'access_AccessController_loginComponent'
    ], $this->data)
);

$storeData = json_encode([
    "appBaseURL" => $request->getBasePath()
])
?>


<script type="text/javascript">window.reactVariable =  <?= $props ?></script>
<script type="text/javascript">window.reactBackOfficeVar =  <?= $storeData ?></script>
<div react-component="PanelComponentLoader" id="login-to-app" } react-props="reactVariable"></div>


<? if (!isset($_SESSION["inDev"])) {
    $_SESSION["inDev"] = false;
} ?>
<? if (isset($_REQUEST["inDev"])) {
    $_SESSION["inDev"] = $_REQUEST["inDev"];
} ?>

<?php
$manifest = false;
$manifestFile = ARROW_DOCUMENTS_ROOT . "/assets/dist/webpack-assets.json";
if (file_exists($manifestFile)) {
    $manifest = json_decode(file_get_contents($manifestFile), true);
}


?>
<!--<script type="text/javascript" src="<?/*= $manifest["vendors"]["js"] */?>"></script>
<link rel="stylesheet" href="<?/*= $manifest["vendors"]["css"] */?>"/>-->

<? if ($manifest && !$_SESSION["inDev"]) { ?>
    <script type="text/javascript" src="<?= $manifest["admin"]["js"] ?>"></script>
<link rel="stylesheet" href="<?= $manifest["admin"]["css"] ?>"/>
<? } else { ?>
    <script type="text/javascript" src="//localhost:3000/bundle.js" crossorigin="anonymous" charset="utf-8"></script>
<? } ?>


</body>
</html>
