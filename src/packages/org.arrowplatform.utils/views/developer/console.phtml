<div style="height: 100%; background-color: #f0f4f7; ">
    <div style="height: 5px;"></div>
    <div style="margin: 0 5px; background-color: #E4E4E4; border-radius: 5px; padding: 5px;">
        <a class="execute btn btn-mini">Wykonaj</a>
        <a href="" class="save btn btn-mini">Zapisz</a>
        v:utils::./console_execute?execute=1
    </div>

    <form:code style="width: 650px; margin: 5px;  height: 90%; float: left;" name="code" value="$this['code']" mode="php"/>
    <iframe class="result" style="margin: 5px; font-weight: bold; font-family: verdana;  width: 45%; height: 90%; white-space: pre; padding-left: 5px; float: right;"></iframe>


    <div style="clear: both;"></div>
</div>


<style type="text/css">
    .my-ace, .result {
        margin: 0;
        padding: 0;
        border: 0;
        border: 10px solid #ddd;
        -moz-border-radius: 10px;
        -webkit-border-radius: 10px;
    }

</style>
<script type="text/javascript">

    var editor;


    $(function () {
        var mw = $(".result").parent().width();
        var mh = $(".result").parent().height();
        $(".my-ace").width(mw / 2 - 35)
        $(".result").width(mw / 2 - 35);
        $(".my-ace,.result").height(mh - 80);


        $(".execute,.save").button();
        $(".execute,.save").click(function (e) {
            e.stopPropagation();
            var code = $(".my-ace").prev().val();
            var method = $(this).attr('class');
            $.post(
                'o:utils::developer/saveConsoleCode',
                {"code": code},
                function (data) {
                    if (method != "save")
                        $(".result").attr("src", 'v:utils::./console_execute?execute=1');
                }
                , "text"
            );
            return false;
        });
    });
</script>

